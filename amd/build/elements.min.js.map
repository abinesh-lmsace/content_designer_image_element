{"version":3,"file":"elements.min.js","sources":["../src/elements.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module for managing content designer elements and animations.\n *\n * This module defines various functions and constants to handle the loading,\n * refreshing, and animating of content designer elements within a course.\n * It utilizes organization-specific modules for fragment loading and template\n * manipulation, and includes features such as entrance animations and scrolling\n * effects for elements in the viewport.\n *\n * @module mod_contentdesigner/editor\n * @copyright  2024 bdecent gmbh <https://bdecent.de>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/fragment', 'core/templates', 'core/ajax', 'core/loadingicon', 'mod_contentdesigner/anime'],\n    function ($, Fragment, Templates, AJAX, LoadingIcon, anime) {\n\n        /**\n         * Selectors.\n         */\n        const SELECTORS = {\n            chapter: '[data-elementshortname=\"chapter\"]',\n            chapterList: '.chapter-elements-list',\n            elementContent: '.element-content',\n            fragments: {\n                nextContents: 'load_remain_capter_contents'\n            },\n            contentWrapper: '.contentdesigner-wrapper',\n        };\n\n        const detailElement = 'input[name=contentdesigner_cm_details]';\n\n        /**\n         * Get the content designer elements data.\n         *\n         * @param {int} cmID\n         * @param {int} contextID\n         * @param {int} contentdesignerID\n         * @param {int} attemptID\n         * @returns {object}\n         */\n        function contentDesignerElementsData(cmID, contextID, contentdesignerID, attemptID) {\n            var data = {\n                cmid: cmID,\n                contextid: contextID,\n                contentdesignerid: contentdesignerID,\n                attemptid: attemptID,\n            };\n            return data;\n        }\n\n        const contentDesignerData = () => {\n            var cmdetails = document.querySelector(detailElement) !== null ? document.querySelector(detailElement).value : '';\n            var cmdata = (cmdetails) ? JSON.parse(cmdetails) : '';\n            return cmdata || contentDesignerElementsData();\n        };\n\n        var completionupdated = false;\n\n        let animations = {};\n\n        let button = () => document.querySelector('.contentdesigner-content');\n\n        let courseContentSelector = 'ul.course-content-list';\n\n        let courseContent = () => document.querySelector(courseContentSelector);\n\n        const contentWrapper = () => document.querySelector(SELECTORS.contentWrapper);\n\n        const refreshContent = () => {\n            var params = {\n                cmid: contentDesignerData().cmid,\n                attemptid: contentDesignerData().attemptid,\n            };\n            var promise = Fragment.loadFragment('mod_contentdesigner', 'load_elements', contentDesignerData().contextid, params);\n            promise.done((html, js) => {\n                var fakeDiv = document.createElement('div');\n                fakeDiv.innerHTML = html;\n                var chapters = fakeDiv.querySelector('.course-content-list').children;\n                var filterChapter = [];\n\n                chapters.forEach((chapter) => {\n\n                    var elementSelector = 'li.element-item[data-instanceid=\"' + chapter.dataset.instanceid + '\"]';\n                    elementSelector += '[data-elementshortname=\"' + chapter.dataset.elementshortname + '\"]';\n                    let chapterSelector = 'li.chapters-list[data-id=\"' + chapter.dataset.id + '\"]';\n\n                    if (!document.querySelector(chapterSelector) && !document.querySelector(elementSelector)) {\n                        filterChapter.push(chapter);\n                    } else {\n                        var elements = chapter.querySelectorAll('.element-item') ?? [];\n                        elements.forEach((element) => {\n                            var dataset = element.children[0].dataset;\n                            var selector = 'li.element-item .element-content[data-instanceid=\"' + dataset.instanceid + '\"]';\n                            selector += '[data-elementshortname=\"' + dataset.elementshortname + '\"]';\n                            var elementindocument = document.querySelector(selector);\n\n                            if (!document.querySelector(selector)\n                                && document.querySelector(chapterSelector + ' .chapter-elements-list') !== undefined) {\n                                document.querySelector(chapterSelector + ' .chapter-elements-list').appendChild(element);\n                            } else if (elementindocument !== null && elementindocument.dataset.replaceonrefresh == true) {\n\n                                if (elementindocument.dataset.elementshortname == 'tableofcontents') {\n                                    var selector = 'li.element-item[data-instanceid=\"' + dataset.instanceid + '\"]';\n                                    selector += '[data-elementshortname=\"' + dataset.elementshortname + '\"]';\n                                    elementindocument = document.querySelector(selector);\n                                }\n\n                                Templates.replaceNode(elementindocument, element, '');\n                            }\n                        });\n                        if (chapter.querySelector('.chapter-elements-list') !== null) {\n                            chapter.querySelector('.chapter-elements-list').remove();\n                        }\n                        if (chapter.querySelector('.chapter-title') !== null) {\n                            chapter.querySelector('.chapter-title').remove();\n                        }\n\n                        if (chapter.children.length > 0 && document.querySelector(chapterSelector) != undefined) {\n                            removeMarkBtn(chapterSelector);\n                            document.querySelector(chapterSelector).append(chapter.children[0]);\n                        }\n                    }\n                });\n\n                Templates.appendNodeContents('.contentdesigner-content .course-content-list', filterChapter, js);\n                animateElements();\n                contentWrapper().dispatchEvent(new CustomEvent('elementupdate')); // Dispatch the element update event.\n            }\n            ).catch();\n\n            LoadingIcon.addIconToContainerRemoveOnCompletion(button(), promise);\n        };\n\n        const removeMarkBtn = (chapterSelector) => {\n            if (document.querySelector(chapterSelector).querySelector('.toolbar-block') != undefined) {\n                document.querySelector(chapterSelector).querySelector('.toolbar-block').remove();\n            }\n        };\n\n        /**\n         * Remove the warning from response.\n         */\n        const removeWarning = () => {\n            if (courseContent() !== null && courseContent().querySelector('.label.label-warning') !== null) {\n                courseContent().querySelector('.label.label-warning').remove();\n            }\n        };\n\n        const loadNextChapters = function (currentChapter) {\n            var params = {\n                cmid: contentDesignerData().cmid,\n                chapter: currentChapter,\n                attemptid: contentDesignerData().attemptid,\n            };\n            var promise = Fragment.loadFragment('mod_contentdesigner', 'load_next_chapters',\n                contentDesignerData().contextid, params);\n            promise.done((html, js) => {\n                var fakeDiv = document.createElement('div');\n                fakeDiv.innerHTML = html;\n                var chapters = fakeDiv.querySelector('.course-content-list').children;\n                var filterChapter = [];\n                chapters.forEach((chapter) => {\n                    var elementSelector = 'li.element-item[data-instanceid=\"' + chapter.dataset.instanceid + '\"]';\n                    elementSelector += '[data-elementshortname=\"' + chapter.dataset.elementshortname + '\"]';\n\n                    if (!document.querySelector('li.chapters-list[data-id=\"' + chapter.dataset.id + '\"]')\n                        && !document.querySelector(elementSelector)) {\n                        filterChapter.push(chapter);\n                    }\n                });\n                Templates.appendNodeContents('.contentdesigner-content .course-content-list', filterChapter, js);\n                animateElements();\n            }).catch();\n\n            LoadingIcon.addIconToContainerRemoveOnCompletion(button(), promise);\n        };\n\n        const loadNextElements = function (currentElement) {\n\n            Fragment.loadFragment(\n                'mod_contentdesigner', SELECTORS.fragments.nextContents,\n                contentDesignerData().contextid, { contentid: currentElement.dataset.contentid }\n            ).done((html, js) => {\n\n                const selector = currentElement.parentNode.parentNode;\n\n                Templates.appendNodeContents(selector, html, js);\n            });\n        };\n\n        const updateCompletion = (completionmethod) => {\n            // Update the compeltion once in the page load.\n            var promises = AJAX.call([{\n                methodname: 'mod_contentdesigner_update_completion',\n                args: {\n                    contentdesignerid: contentDesignerData().contentdesignerid,\n                    method: completionmethod,\n                }\n            }]);\n\n            promises[0].done(() => {\n                if (!completionupdated) {\n                    completionupdated = true;\n                }\n            }).catch();\n        };\n\n\n        /**\n         * Verify the given element in the viewport.\n         *\n         * @param {HTMLElement} el Element to verify\n         * @returns {bool}\n         */\n        const inView = function (el) {\n            const rect = el.getBoundingClientRect();\n            return (rect.top >= 0 && rect.left >= 0\n                && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n                && rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n            );\n        };\n\n        /**\n         * Animate the module elements when the elements in the viewport.\n         */\n        const animateElements = function () {\n            entranceAnimation(); // Init entrance animation.\n            scrollingEffects();\n        };\n\n        /**\n         * Initilaize the scroll reveal animation for elements.\n         */\n        function entranceAnimation() {\n\n            var leftFrame = [\n                { transform: 'translate3d(-100%, 0, 0)' },\n                { transform: 'translate3d(0, 0, 0)', opacity: 1 },\n            ];\n\n            var rightFrame = [\n                { transform: 'translate3d(100%, 0, 0)' },\n                { transform: 'translate3d(10%, 0, 0)', opacity: 1 },\n            ];\n\n            var fadeIn = [\n                { opacity: 0 },\n                { opacity: 1 }\n            ];\n\n            const items = document.querySelectorAll('.element-item .general-options.animation');\n            items.forEach((item) => {\n                var node = item;\n                if (node.dataset.entranceanimation == undefined || node.dataset.entranceanimation == '') {\n                    return;\n                }\n                var data = JSON.parse(node.dataset.entranceanimation);\n                var speed = 1500;\n                if (data.duration == 'slow') {\n                    speed = 3000;\n                } else if (data.duration == 'fast') {\n                    speed = 500;\n                }\n                const observer = new IntersectionObserver(entries => {\n                    entries.forEach(entry => {\n                        const intersecting = entry.isIntersecting;\n                        if (intersecting) {\n                            node = entry.target;\n                            if (node.classList.contains('animated')) {\n                                return;\n                            }\n\n                            var frame = fadeIn;\n                            if (data.animation == 'slideInLeft') {\n                                frame = leftFrame;\n                            } else if (data.animation == 'slideInRight') {\n                                frame = rightFrame;\n                            }\n\n                            setTimeout(function () {\n                                node.classList.add('animated');\n                                item.animate(frame, { duration: speed || 1000 });\n                            }, data.delay);\n                            observer.unobserve(item);\n                        }\n                    });\n                });\n\n                observer.observe(item);\n            });\n        }\n\n        /**\n         * Setup the scrolling effects.\n         */\n        function scrollingEffects() {\n\n            document.querySelectorAll('.element-item').forEach(function (item) {\n                animate(item);\n            });\n            /* Item = document.querySelectorAll('.element-item')[5];\n            animate(item); */\n        }\n\n        /**\n         * Animate the element based on scrolling.\n         * @param {HTMLELement} item\n         * @returns {void}\n         */\n        function animate(item) {\n\n            var node = item.childNodes[1];\n            if (node.dataset.scrolleffect == undefined || node.dataset.scrolleffect == '') {\n                return;\n            }\n            var id = node.dataset.contentid;\n            var data = JSON.parse(node.dataset.scrolleffect);\n            var speed = data.speed ? (10000 / data.speed) : 0;\n            animations[id] = anime({\n                targets: item.childNodes[1],\n                translateX: data.direction == 'left' ? [800, 0] : [-800, 0],\n                duration: speed || 500,\n                autoplay: false,\n                elasticity: 0,\n                easing: 'easeInOutSine'\n            });\n\n            document.getElementById('page').addEventListener('scroll', function () {\n                document.getElementById('page').style.overflow = 'visible';\n                var scroll = animateOnScroll(item, animations[id].duration);\n                animations[id].seek(scroll);\n            });\n            window.addEventListener('scroll', function () {\n                var scroll = animateOnScroll(item, animations[id].duration);\n                animations[id].seek(scroll);\n            });\n            var modalBody = document.querySelector('.path-course-view .modal-dialog-scrollable .modal-body');\n            if (modalBody !== null) {\n                modalBody.addEventListener('scroll', function (e) {\n                    var scroll = animateOnScroll(item, animations[id].duration, e.target);\n                    animations[id].seek(scroll);\n                });\n            }\n\n            window.addEventListener('load', function () {\n                setTimeout(function () {\n                    document.getElementById('page').style.overflow = 'visible';\n                }, 500);\n                var scroll = animateOnScroll(item, animations[id].duration);\n                animations[id].seek(scroll);\n            });\n\n            document.getElementById('page').style.overflow = 'visible';\n        }\n\n        /**\n         * Find the seek volume for the given element to move the element.\n         *\n         * @param {HTMLElement} item\n         * @param {double} dataspeed\n         * @param {HTMLElement} scrollElement\n         * @returns {bool}\n         */\n        const animateOnScroll = function (item, dataspeed, scrollElement = null) {\n\n            var node = item.childNodes[1];\n            if (node.dataset.scrolleffect == undefined || node.dataset.scrolleffect == '') {\n                return;\n            }\n            var data = JSON.parse(node.dataset.scrolleffect);\n            let start = parseInt(data.start) || 100;\n            let end = 200;\n            const docElement = scrollElement || document.documentElement;\n            let clientHeight = docElement.clientHeight;\n            let itemY = () => item.getBoundingClientRect().y;\n            let itemTop = () => item.getBoundingClientRect().top - end;\n            let isStartPosition = () => itemY() + start <= (docElement.clientHeight);\n            let isEndPosition = () => itemY() <= end;\n            if (isStartPosition() && !isEndPosition()) {\n                var ls = docElement.scrollHeight - (docElement.clientHeight + docElement.scrollTop);\n                var availablescroll = Math.min(clientHeight - (end + start), ls);\n                var scrolled = (availablescroll > itemTop())\n                    ? availablescroll - itemTop() : (item.offsetTop - end - itemTop()) - availablescroll;\n                var percent = dataspeed / availablescroll;\n                var speed = scrolled * percent;\n                return speed;\n            }\n            return;\n        };\n\n        return {\n            data: contentDesignerData, // Backward compatibility.\n            contentDesignerData: contentDesignerData,\n            refreshContent: refreshContent,\n            loadNextChapters: loadNextChapters,\n            updateCompletion: updateCompletion,\n            inView: inView,\n            animateElements: animateElements,\n            courseContent: courseContent,\n            removeWarning: removeWarning,\n            loadNextElements: loadNextElements,\n            contentDesignerElementsData: contentDesignerElementsData,\n            selectors: SELECTORS\n        };\n    });\n"],"names":["define","$","Fragment","Templates","AJAX","LoadingIcon","anime","SELECTORS","chapter","chapterList","elementContent","fragments","nextContents","contentWrapper","contentDesignerElementsData","cmID","contextID","contentdesignerID","attemptID","cmid","contextid","contentdesignerid","attemptid","contentDesignerData","cmdetails","document","querySelector","value","JSON","parse","completionupdated","animations","button","courseContent","removeMarkBtn","chapterSelector","undefined","remove","animateElements","leftFrame","rightFrame","fadeIn","transform","opacity","querySelectorAll","forEach","item","node","dataset","entranceanimation","data","speed","duration","observer","IntersectionObserver","entries","entry","isIntersecting","target","classList","contains","frame","animation","setTimeout","add","animate","delay","unobserve","observe","childNodes","scrolleffect","id","contentid","targets","translateX","direction","autoplay","elasticity","easing","getElementById","addEventListener","style","overflow","scroll","animateOnScroll","seek","window","modalBody","e","dataspeed","scrollElement","start","parseInt","end","docElement","documentElement","clientHeight","itemY","getBoundingClientRect","y","itemTop","top","isStartPosition","isEndPosition","ls","scrollHeight","scrollTop","availablescroll","Math","min","scrolled","offsetTop","percent","refreshContent","params","promise","loadFragment","done","html","js","fakeDiv","createElement","innerHTML","chapters","children","filterChapter","elementSelector","instanceid","elementshortname","element","selector","elementindocument","replaceonrefresh","replaceNode","appendChild","length","append","push","appendNodeContents","dispatchEvent","CustomEvent","catch","addIconToContainerRemoveOnCompletion","loadNextChapters","currentChapter","updateCompletion","completionmethod","call","methodname","args","method","inView","el","rect","left","bottom","innerHeight","right","innerWidth","clientWidth","removeWarning","loadNextElements","currentElement","parentNode","selectors"],"mappings":"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"}