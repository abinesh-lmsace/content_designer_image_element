/**
 * Table of content element actions.
 *
 * @module cdelement_tableofcontents/tableofcontents
 * @copyright  2024 bdecent gmbh <https://bdecent.de>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("cdelement_tableofcontents/tableofcontents",[],(function(){const SELECTORS_actionbutton=".toc-action-block .cta-action-btn",SELECTORS_tablecontent=".element-tableofcontents",SELECTORS_tocblock=".toc-list-block",SELECTORS_cdprogressbar=".contentdesigner-progress",SELECTORS_tocprogressbar=".toc-progressbar",SELECTORS_tocchaptertitle=".toc-chapter-title",SELECTORS_tocmodtitle=".toc-mod-title-block",SELECTORS_tocblockelem=".toc-block",SELECTORS_chaptertitlelist=".element-tableofcontents .toc-chapter-block .toc-chapter-title",SELECTORS_contentWrapper=".contentdesigner-wrapper",SELECTORS_generaloptions=".topinstance .item-tableofcontents .general-options",tableofcontent=()=>document.querySelector(SELECTORS_tocblock),cdprogressbar=()=>document.querySelector(SELECTORS_cdprogressbar),tocprogressbar=()=>document.querySelectorAll(SELECTORS_tocprogressbar),tocblock=()=>document.querySelector(SELECTORS_tocblockelem),actionbutton=()=>document.querySelector(SELECTORS_actionbutton),generaloptionwrapper=()=>document.querySelector(SELECTORS_generaloptions),inittableofcontents=()=>{var contentElem=document.querySelector(SELECTORS_tablecontent);if(null!==tocblock()){var height=tocblock().getBoundingClientRect().height;height&&(tocblock().parentNode.style.minHeight=height+"px")}if(contentElem&&contentElem.classList.contains("stickycontent")){document.querySelector("#page").addEventListener("scroll",(()=>{stickycontents(!1)})),window.addEventListener("scroll",(()=>{stickycontents(!1)}));var popup=document.querySelector("body.format-popups .modal-content .modal-body");null!==popup&&popup.addEventListener("scroll",(()=>{stickycontents(!0)})),stickycontents(!1)}else contentElem&&contentElem.classList.contains("scrollup-stickycontent")&&scrollupstickycontents();document.querySelector(SELECTORS_contentWrapper).addEventListener("elementupdate",(()=>{ctaaction()})),ctaaction()},stickycontents=popup=>{if(popup)var navbar=document.querySelector("body.format-popups .modal-content .modal-header");else navbar=document.querySelector("nav.navbar.fixed-top");var navbarSize=null!==navbar?navbar.clientHeight:50;if(null!=tocblock()&&tocblock().parentNode.getBoundingClientRect().bottom<navbarSize){if(displayelementsonsticky(),popup){var rem=window.innerWidth>575?1.9:0;tocblock().style.top="calc("+navbarSize+"px + "+rem+"rem)"}}else hideelementsonsticky()},scrollupstickycontents=()=>{var oldScrollY=window.scrollY;window.onscroll=function(e){oldScrollY>window.scrollY?stickycontents(!1):hideelementsonsticky(),oldScrollY=window.scrollY};const popup=document.querySelector("body.format-popups .modal-content .modal-body");if(popup){let oldPopupScrollY=0;popup.addEventListener("scroll",(()=>{popup.scrollTop<oldPopupScrollY?stickycontents(!0):hideelementsonsticky(),oldPopupScrollY=popup.scrollTop}))}},hideelementsonsticky=()=>{tocblock().classList.remove("fixed-top"),tableofcontent().classList.remove("header-maxwidth"),tocprogressbar().forEach((progressbar=>{progressbar.classList.add("d-none")})),cdprogressbar().style.display="block",hidechaptertitle(!1),hidemodtitle(!1),hideactionbutton(!1),hidegeneralstyle(!1)},displayelementsonsticky=()=>{tocblock().classList.add("fixed-top"),tableofcontent().classList.add("header-maxwidth"),tocprogressbar().forEach((progressbar=>{progressbar.classList.remove("d-none")})),cdprogressbar().style.display="none",hidechaptertitle(!0),hidemodtitle(!0),hideactionbutton(!0),hidegeneralstyle(!0)},hidechaptertitle=display=>{document.querySelectorAll(SELECTORS_tocchaptertitle).forEach((title=>{display?title.classList.contains("hideonsticky")&&(title.style.display="none"):title.classList.contains("hideonsticky")&&(title.style.display="block")}))},hidemodtitle=display=>{document.querySelectorAll(SELECTORS_tocmodtitle).forEach((title=>{display?title.classList.contains("hideonsticky")&&(title.style.display="none"):title.classList.contains("hideonsticky")&&(title.style.display="block")}))},hideactionbutton=status=>{var actionbutton=document.querySelector(".toc-action-block");null!=actionbutton&&(actionbutton.style.display=status?"none":"block")},ctaaction=()=>{null!=actionbutton()&&actionbutton().addEventListener("click",(e=>{var chapterid=e.target.dataset.actionid;viewtochapter(chapterid)}));var chaptertitlelist=document.querySelectorAll(SELECTORS_chaptertitlelist);null!=chaptertitlelist&&chaptertitlelist.forEach((title=>{title.addEventListener("click",(e=>{var chapterid=e.target.dataset.chapter;viewtochapter(chapterid)}))}))},viewtochapter=chapterid=>{var chapterSelector=document.querySelector('li.chapters-list[data-id="'+chapterid+'"]');null!=chapterSelector&&chapterSelector.scrollIntoView(!0)},hidegeneralstyle=status=>{if(void 0!==generaloptionwrapper()){var margin=generaloptionwrapper().dataset.margin,padding=generaloptionwrapper().dataset.padding;status?(generaloptionwrapper().style.margin="0px",generaloptionwrapper().style.padding="0px"):(generaloptionwrapper().style.margin=margin,generaloptionwrapper().style.padding=padding)}};return{init:function(){inittableofcontents()}}}));

//# sourceMappingURL=tableofcontents.min.js.map