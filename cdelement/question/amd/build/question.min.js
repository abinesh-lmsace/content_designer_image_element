/**
 * Question element - Module to resize the question embeded frame.
 *
 * @module    cdelement_question/question
 * @copyright  2024 bdecent gmbh <https://bdecent.de>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("cdelement_question/question",["mod_contentdesigner/elements"],(function(Elements){const initquestion=()=>{document.querySelectorAll(".chapters-list li.element-question iframe").forEach((question=>{(instanceID=>{var question=document.querySelector('.element-question .element-content[data-instanceid="'+instanceID+'"]');if(null===question)return!1;const questionFrame=question.querySelector("iframe");((iframe,callback)=>{let checkLoad=setInterval((()=>{if(null!==questionFrame)if(null!==questionFrame.contentDocument){var responseFrom=null==questionFrame?void 0:questionFrame.contentDocument.querySelector("form#responseform");if("complete"===iframe.contentDocument.readyState&&responseFrom){const images=iframe.contentDocument.images;let loadedImagesCount=0;const checkImagesLoaded=()=>{loadedImagesCount++,loadedImagesCount===images.length&&(clearInterval(checkLoad),callback())};if(images.length>0)for(let i=0;i<images.length;i++)images[i].complete?checkImagesLoaded():(images[i].addEventListener("load",checkImagesLoaded),images[i].addEventListener("error",checkImagesLoaded));else clearInterval(checkLoad),callback()}}else clearInterval(checkLoad);else clearInterval(checkLoad)}),500)})(questionFrame,(()=>{var responseFrom=questionFrame.contentDocument.querySelector("form#responseform");(questionFrame=>{questionFrame.style.minHeight="200px";var height=questionFrame.contentWindow.document.documentElement.scrollHeight;height+=50,questionFrame.style.minHeight=height+"px"})(questionFrame),responseFrom.addEventListener("contentdesigner.questionformsubmitted",(function(){Elements.removeWarning(),Elements.refreshContent()}))}))})(question.dataset.instanceid)}))};return{init:function(){initquestion()}}}));

//# sourceMappingURL=question.min.js.map